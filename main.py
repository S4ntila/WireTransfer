#-----------------------–ë–ò–ë–õ–ò–û–¢–ï–ö–ò---------------------------#
import requests
import telebot
import time
import json
from telebot import types
#--------------------–ì–õ–û–ë–ê–õ–¨–ù–´–ï-–ü–ï–†–ï–ú–ï–ù–ù–´–ï-------------------#
BOT_TOKEN = "YOUR_BOT_TOKEN_HERE"

bot = telebot.TeleBot(BOT_TOKEN)

ADMIN_ID = 000000000 # –û—Å–Ω–æ–≤–Ω–æ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
ADMIN_ID2 = 000000000 # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

admins = [ADMIN_ID]

def is_admin(user_id):
    return user_id in admins

last_request_time = {}
userID_file = "users_id.json"
userID_file_review = "users_id_review.json"
reviews_file = "reviews.json"
user_reviews = {}
#-------------------------–î–ê–ù–ù–´–ï-–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø-----------------#
class UserState:
    def __init__(self):
        self.user_id = None
        self.type = None
        self.amount = None
        self.name = None
        self.iban = None
        self.bank = None
        
user_state = UserState()
#-------------------------–ö–£–†–°-----------------------------#
def get_eur_rub(): # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞ –µ–≤—Ä–æ –∫ —Ä—É–±–ª—é —Å –ø–æ–º–æ—â—å—é API –¶–µ–Ω—Ç—Ä–æ–±–∞–Ω–∫–∞ –†–æ—Å—Å–∏–∏
    response = requests.get("https://www.cbr-xml-daily.ru/daily_json.js")
    if response.status_code == 200:
        data = response.json()
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –∫—É—Ä—Å –µ–≤—Ä–æ –∫ —Ä—É–±–ª—é –∏–∑ —Å–ª–æ–≤–∞—Ä—è
        eur_rub = data["Valute"]["EUR"]["Value"]
        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫—É—Ä—Å –≤ –≤–∏–¥–µ —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π
        return float(eur_rub)
    else:
        return None
    
def get_eur_rub_rate(type): # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º—ã–π –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–¥–≥–æ–≤–Ω—è–µ–º –ø–æ–¥ –Ω—É–∂–Ω—ã–π –∫—É—Ä—Å
    if type == "–ü–æ–∫—É–ø–∫–∞":
        eur_rub_buy = round(get_eur_rub() * 1.053, 2)
        return eur_rub_buy 
    elif type == "–ü—Ä–æ–¥–∞–∂–∞":
        eur_rub_sell = round(get_eur_rub() * 0.975, 2)
        return eur_rub_sell
    else:
        return None
#-------------------------–°–ü–ê–ú-----------------------------#
def check_spam(user_id): # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞—è–≤–∫—É —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö —Å –ø–æ–º–æ—â—å—é –º–æ–¥—É–ª—è time
    current_time = time.time()
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ª–æ–≤–∞—Ä–µ last_request_time
    if user_id in last_request_time:
        # –ï—Å–ª–∏ –µ—Å—Ç—å, –ø–æ–ª—É—á–∞–µ–º –≤—Ä–µ–º—è –µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞—è–≤–∫–∏
        previous_time = last_request_time[user_id]
        # –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É —Ç–µ–∫—É—â–∏–º –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        delta = current_time - previous_time
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ä–∞–∑–Ω–∏—Ü–∞ –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ 120 —Å–µ–∫—É–Ω–¥–∞–º (2 –º–∏–Ω—É—Ç–∞–º)
        if delta >= 120:
            return True
        else:
            return False
    else:
        return True
#-------------------------–ö–õ–ê–í–ò–ê–¢–£–†–´-–ò-–ö–ù–û–ü–ö–ò-----------------------------#
    
def create_keyboard():
    # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å –ø–æ–º–æ—â—å—é –∫–ª–∞—Å—Å–∞ InlineKeyboardMarkup
    keyboard = types.InlineKeyboardMarkup()
    # –°–æ–∑–¥–∞–µ–º —Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏ —Å –ø–æ–º–æ—â—å—é –∫–ª–∞—Å—Å–∞ InlineKeyboardButton –∏ —Ç–µ–∫—Å—Ç–æ–º "–ö—É—Ä—Å", "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è" –∏ "–û–±–º–µ–Ω"
    button_rate = types.InlineKeyboardButton("–ö—É—Ä—Å", callback_data="rate")
    button_instruction = types.InlineKeyboardButton("–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è", callback_data="instruction")
    # –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –æ–±–º–µ–Ω–∞ —Å –ø–æ–º–æ—â—å—é –∫–ª–∞—Å—Å–∞ InlineKeyboardButton –∏ —Ç–µ–∫—Å—Ç–æ–º "–û–±–º–µ–Ω"
    button_exchange = types.InlineKeyboardButton("–û–±–º–µ–Ω", callback_data="exchange")
    button_reviews = types.InlineKeyboardButton("–û—Ç–∑—ã–≤—ã", callback_data="reviews")
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –æ–±–º–µ–Ω–∞ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤ –Ω–æ–≤—ã–π —Ä—è–¥ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ row
    keyboard.row(button_exchange)
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤ –æ–¥–∏–Ω —Ä—è–¥ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ add
    keyboard.add(button_rate, button_instruction)
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –æ–±–º–µ–Ω–∞ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤ –Ω–æ–≤—ã–π —Ä—è–¥ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ row
    keyboard.row(button_reviews)
    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    return keyboard

def create_type_keyboard():
    # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å –ø–æ–º–æ—â—å—é –∫–ª–∞—Å—Å–∞ ReplyKeyboardMarkup
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    # –°–æ–∑–¥–∞–µ–º –¥–≤–µ –∫–Ω–æ–ø–∫–∏ —Å –ø–æ–º–æ—â—å—é –∫–ª–∞—Å—Å–∞ KeyboardButton –∏ —Ç–µ–∫—Å—Ç–æ–º "–ü–æ–∫—É–ø–∫–∞" –∏ "–ü—Ä–æ–¥–∞–∂–∞"
    button_buy = types.KeyboardButton("–ü–æ–∫—É–ø–∫–∞")
    button_sell = types.KeyboardButton("–ü—Ä–æ–¥–∞–∂–∞")
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤ –æ–¥–∏–Ω —Ä—è–¥ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ add
    keyboard.add(button_buy, button_sell)
    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    return keyboard

def create_bank_keyboard():
    # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å –ø–æ–º–æ—â—å—é –∫–ª–∞—Å—Å–∞ ReplyKeyboardMarkup
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    # –°–æ–∑–¥–∞–µ–º —Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏ —Å –ø–æ–º–æ—â—å—é –∫–ª–∞—Å—Å–∞ KeyboardButton –∏ —Ç–µ–∫—Å—Ç–æ–º "–¢–∏–Ω—å–∫–æ—Ñ—Ñ", "–°–±–µ—Ä–±–∞–Ω–∫" –∏ "–ê–ª—å—Ñ–∞–±–∞–Ω–∫"
    button_tinkoff = types.KeyboardButton("–°–±–µ—Ä–±–∞–Ω–∫")
    button_sberbank = types.KeyboardButton("–¢–∏–Ω—å–∫–æ—Ñ—Ñ")
    button_alfabank = types.KeyboardButton("–†–∞–π—Ñ—Ñ–∞–π–∑–µ–Ω")
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤ –æ–¥–∏–Ω —Ä—è–¥ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ add
    keyboard.add(button_tinkoff, button_sberbank, button_alfabank)
    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    return keyboard

def create_cancel():
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    button_cancel = types.KeyboardButton("–û—Ç–º–µ–Ω–∞")
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤ –æ–¥–∏–Ω —Ä—è–¥ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ add
    keyboard.add(button_cancel)
    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    return keyboard

def create_confirm_keyboard():
    # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å –ø–æ–º–æ—â—å—é –∫–ª–∞—Å—Å–∞ ReplyKeyboardMarkup
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    # –°–æ–∑–¥–∞–µ–º –¥–≤–µ –∫–Ω–æ–ø–∫–∏ —Å –ø–æ–º–æ—â—å—é –∫–ª–∞—Å—Å–∞ KeyboardButton –∏ —Ç–µ–∫—Å—Ç–æ–º "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" –∏ "–û—Ç–º–µ–Ω–∞"
    button_confirm = types.KeyboardButton("–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å")
    button_cancel = types.KeyboardButton("–û—Ç–º–µ–Ω–∞")
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤ –æ–¥–∏–Ω —Ä—è–¥ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ add
    keyboard.add(button_confirm, button_cancel)
    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    return keyboard

def create_review_keyboard():
    # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å –ø–æ–º–æ—â—å—é –∫–ª–∞—Å—Å–∞ ReplyKeyboardMarkup
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    button_write = types.KeyboardButton("–ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤")
    button_view = types.KeyboardButton("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∑—ã–≤—ã")
    button_cancel = types.KeyboardButton("–û—Ç–º–µ–Ω–∞")
    keyboard.add(button_write, button_view, button_cancel)
    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    return keyboard

#----------------------------–û–ë–†–ê–ë–û–¢–ß–ò–ö–ò------------------------------#

@bot.message_handler(commands=["start"])
def start(message):
    if is_admin(message.from_user.id):
        bot.send_message(message.chat.id, f"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {message.from_user.first_name}! –í—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —ç—Ç–æ–≥–æ –±–æ—Ç–∞. –ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å?")
    else:
        bot.send_message(message.chat.id, "–Ø –º–æ–≥—É –ø–æ–º–æ—á—å —Ç–µ–±–µ –∫—É–ø–∏—Ç—å –∏–ª–∏ –ø—Ä–æ–¥–∞—Ç—å –µ–≤—Ä–æ –ø–æ –≤—ã–≥–æ–¥–Ω–æ–º—É –∫—É—Ä—Å—É. üí∂", reply_markup=create_keyboard())

@bot.message_handler(commands=["rate"])
def rate(message):
    eur_rub_buy_str =  get_eur_rub_rate("–ü–æ–∫—É–ø–∫–∞")
    eur_rub_sell_str =  get_eur_rub_rate("–ü—Ä–æ–¥–∞–∂–∞")
    if eur_rub_buy_str and eur_rub_sell_str is not None:
        text = f"üí∞ –ö—É—Ä—Å –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç:\n\nüü¢ RUB ‚ûú EUR: <b>{eur_rub_buy_str}</b>\nüî¥ EUR ‚ûú RUB: <b>{eur_rub_sell_str}</b>"
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ send_message
        bot.send_message(message.chat.id, text, parse_mode='html', reply_markup=create_keyboard())
    else:
        text = "–ò–∑–≤–∏–Ω–∏, —è –Ω–µ —Å–º–æ–≥ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –∫—É—Ä—Å—É –µ–≤—Ä–æ. üò¢\n–ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏ –º–Ω–µ /start, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, —á—Ç–æ —è —É–º–µ—é."
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –∏–∑–≤–∏–Ω–µ–Ω–∏–µ–º –∏ —ç–º–æ–¥–∑–∏
        bot.send_message(message.chat.id, text, reply_markup=create_keyboard())

@bot.message_handler(commands=["instruction"])
def instruction(message):
    # –°–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –∏ —ç–º–æ–¥–∑–∏
    text = "1. –ü–æ–¥–∞—ë—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ –æ–±–º–µ–Ω –≤–∞–ª—é—Ç—ã —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É <b>¬´–û–±–º–µ–Ω¬ª</b> –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –±–æ—Ç–∞, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏–≤—à–∏—Å—å —Å –∫—É—Ä—Å–æ–º –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ. \n–ü–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:\n‚ñ™Ô∏è–¢–∏–ø –ø–µ—Ä–µ–≤–æ–¥–∞ (–ø–æ–∫—É–ø–∫–∞/–ø—Ä–æ–¥–∞–∂–∞)\n‚ñ™Ô∏è–ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—ë–Ω –ø–µ—Ä–µ–≤–æ–¥\n‚ñ™Ô∏è–°—É–º–º–∞\n‚ñ™Ô∏è–†–µ–∫–≤–∏–∑–∏—Ç—ã –≤–∞—à–µ–π –∫–∞—Ä—Ç—ã –¥–ª—è –∑–∞—á–∏—Å–ª–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤\n\n2. –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è —è —Å–≤—è–∂—É—Å—å —Å –≤–∞–º–∏ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –∫—É—Ä—Å–∞ –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥. –ê —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã.\n\n3. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤, <b>–≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç</b>, —Å–ª–µ–¥—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –∫ –ø–ª–∞—Ç–µ–∂—É, –∞ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —á–µ–∫.\n\n4. –î–µ–Ω—å–≥–∏ –ø–æ—Å—Ç—É–ø—è—Ç –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤–∞–º–∏ –≤ –∑–∞—è–≤–∫–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 30-60 –º–∏–Ω—É—Ç.\n\n5. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –¥–µ–Ω—å–≥–∏ –ø–æ—Å—Ç—É–ø—è—Ç –Ω–∞ –≤–∞—à —Å—á—ë—Ç, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <b>—Å—Ä–∞–∑—É</b> –ø—Ä–∏—Å–ª–∞—Ç—å —Å–∫—Ä–∏–Ω –ø—Ä–∏—Ö–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤."
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ send_message
    bot.send_message(message.chat.id, text, parse_mode='html', reply_markup=create_keyboard())

@bot.message_handler(commands=["exchange"])
def exchange(message):
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∞—Ç—Ä–∏–±—É—Ç user_id –æ–±—ä–µ–∫—Ç–∞ user_state
    user_state.user_id = message.chat.id
    if check_spam(user_state.user_id):
        # –ï—Å–ª–∏ –Ω–µ —Å–ø–∞–º–∏—Ç, —Ç–æ –æ–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞—è–≤–∫–∏ –≤ —Å–ª–æ–≤–∞—Ä–µ last_request_time
        last_request_time[user_state.user_id] = time.time()
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –≤–æ–ø—Ä–æ—Å–æ–º –æ —Ç–∏–ø–µ –ø–µ—Ä–µ–≤–æ–¥–∞ (–ø–æ–∫—É–ø–∫–∞ –∏–ª–∏ –ø—Ä–æ–¥–∞–∂–∞ –µ–≤—Ä–æ) –∏ –¥–≤—É–º—è –∫–Ω–æ–ø–∫–∞–º–∏ "–ü–æ–∫—É–ø–∫–∞" –∏ "–ü—Ä–æ–¥–∞–∂–∞"
        bot.send_message(message.chat.id, "–¢—ã —Ö–æ—á–µ—à—å –∫—É–ø–∏—Ç—å –∏–ª–∏ –ø—Ä–æ–¥–∞—Ç—å –µ–≤—Ä–æ?", reply_markup=create_type_keyboard())
        # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ —Ç–∏–ø–µ –ø–µ—Ä–µ–≤–æ–¥–∞
        print(message)
        bot.register_next_step_handler(message, process_type_step)
    else:
        # –ï—Å–ª–∏ —Å–ø–∞–º–∏—Ç, —Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –∏ —ç–º–æ–¥–∑–∏
        bot.send_message(message.chat.id, "–¢—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—à—å –∑–∞—è–≤–∫–∏ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ! üò°\n–ü–æ–¥–æ–∂–¥–∏ –¥–≤–µ –º–∏–Ω—É—Ç—ã –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞—è–≤–∫–æ–π.")

@bot.callback_query_handler(func=lambda call: True)
def handle_callback(call):
    # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ—Ç –∫–Ω–æ–ø–∫–∏, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –Ω–∞–∂–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    data = call.data
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–¥–Ω–æ–º—É –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    if data == "rate":
        # –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Ä–∞–≤–Ω—ã "rate", –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é rate, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≤–æ–¥–∏—Ç –∫—É—Ä—Å –µ–≤—Ä–æ –∫ —Ä—É–±–ª—é –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫ –Ω–µ–º—É –ø–æ 6 –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
        rate(call.message)
    elif data == "instruction":
        # –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Ä–∞–≤–Ω—ã "instruction", –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é instruction, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≤–æ–¥–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –æ–±–º–µ–Ω—É –≤–∞–ª—é—Ç—ã —á–µ—Ä–µ–∑ –±–æ—Ç–∞
        instruction(call.message)
    elif data == "exchange":
        # –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Ä–∞–≤–Ω—ã "instruction", –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é instruction, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≤–æ–¥–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –æ–±–º–µ–Ω—É –≤–∞–ª—é—Ç—ã —á–µ—Ä–µ–∑ –±–æ—Ç–∞
        exchange(call.message)
    elif data == "reviews":
        # –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Ä–∞–≤–Ω—ã "instruction", –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é instruction, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≤–æ–¥–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –æ–±–º–µ–Ω—É –≤–∞–ª—é—Ç—ã —á–µ—Ä–µ–∑ –±–æ—Ç–∞
        reviews(call.message)
#-----------------------------------–û–§–û–†–ú–õ–ï–ù–ò–ï-–ó–ê–Ø–í–ö–ò---------------------------------#
def process_type_step(message):
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    text = message.text
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–µ–∫—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–º—É –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    if text == "–ü–æ–∫—É–ø–∫–∞" or text == "–ü—Ä–æ–¥–∞–∂–∞":
        user_state.type = text
        #eur_rub = get_eur_rub_rate(user_state.type)
        bot.send_message(message.chat.id, f"{user_state.type} –µ–≤—Ä–æ. üí∂\n–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –≤ –µ–≤—Ä–æ, –∫–æ—Ç–æ—Ä—É—é —Ç—ã —Ö–æ—á–µ—à—å –∫—É–ø–∏—Ç—å.\n–ù–∞–ø–∏—à–∏ —á–∏—Å–ª–æ –±–µ–∑ –∑–Ω–∞–∫–æ–≤ –∏ –ø—Ä–æ–±–µ–ª–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä: 123", reply_markup=create_cancel())
        # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ —Å—É–º–º–µ –æ–±–º–µ–Ω–∞
        bot.register_next_step_handler(message, process_amount_step)
    else:
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–º—É –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø—Ä–æ—Å—å–±–æ–π –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω—É –∏–∑ –∫–Ω–æ–ø–æ–∫ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ
        bot.send_message(message.chat.id, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ –æ–¥–Ω—É –∏–∑ –æ–ø—Ü–∏–π –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ: –ü–æ–∫—É–ø–∫–∞ –∏–ª–∏ –ü—Ä–æ–¥–∞–∂–∞.", reply_markup=create_cancel())
        # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ —Ç–∏–ø–µ –ø–µ—Ä–µ–≤–æ–¥–∞
        bot.register_next_step_handler(message, process_type_step)

def process_amount_step(message):
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    text = message.text
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–µ–∫—Å—Ç —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å–ª–æ–º
    try:
        # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Ç–µ–∫—Å—Ç –≤ —á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π
        amount = float(text)
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —á–∏—Å–ª–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∏ –Ω–µ —Ä–∞–≤–Ω–æ –Ω—É–ª—é
        if amount > 0:
            # –ï—Å–ª–∏ —á–∏—Å–ª–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∏ –Ω–µ —Ä–∞–≤–Ω–æ –Ω—É–ª—é, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ –≤ –∞—Ç—Ä–∏–±—É—Ç amount –æ–±—ä–µ–∫—Ç–∞ user_state
            user_state.amount = amount
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –≤–æ–ø—Ä–æ—Å–æ–º –æ –µ–≥–æ –∏–º–µ–Ω–∏ –∏ —Ñ–∞–º–∏–ª–∏–∏
            bot.send_message(message.chat.id, "–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç? –ù–∞–ø–∏—à–∏ —Å–≤–æ–µ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—é.", reply_markup=create_cancel())
            # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ –∏–º–µ–Ω–∏ –∏ —Ñ–∞–º–∏–ª–∏–∏
            bot.register_next_step_handler(message, process_name_step)
        else:
            # –ï—Å–ª–∏ —á–∏—Å–ª–æ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ –Ω—É–ª—é, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø—Ä–æ—Å—å–±–æ–π –≤–≤–µ—Å—Ç–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
            bot.send_message(message.chat.id, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –±–æ–ª—å—à–µ –Ω—É–ª—è.", reply_markup=create_cancel())
            # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ —Å—É–º–º–µ –æ–±–º–µ–Ω–∞
            bot.register_next_step_handler(message, process_amount_step)
    except ValueError:
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å–ª–æ–º, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø—Ä–æ—Å—å–±–æ–π –≤–≤–µ—Å—Ç–∏ —á–∏—Å–ª–æ –±–µ–∑ –∑–Ω–∞–∫–æ–≤ –∏ –ø—Ä–æ–±–µ–ª–æ–≤
        bot.send_message(message.chat.id, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏ —á–∏—Å–ª–æ –±–µ–∑ –∑–Ω–∞–∫–æ–≤ –∏ –ø—Ä–æ–±–µ–ª–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä: 1000", reply_markup=create_cancel())
        # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ —Å—É–º–º–µ –æ–±–º–µ–Ω–∞
        bot.register_next_step_handler(message, process_amount_step)

def process_name_step(message):
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    text = message.text
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—Å—Ç –≤ –∞—Ç—Ä–∏–±—É—Ç name –æ–±—ä–µ–∫—Ç–∞ user_state
    user_state.name = text
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –≤–æ–ø—Ä–æ—Å–æ–º –æ –µ–≥–æ IBAN (–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º –Ω–æ–º–µ—Ä–µ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á–µ—Ç–∞)
    bot.send_message(message.chat.id, "–ö–∞–∫–æ–π —É —Ç–µ–±—è IBAN? –ù–∞–ø–∏—à–∏ —Å–≤–æ–π –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –Ω–æ–º–µ—Ä –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á–µ—Ç–∞ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä: AU12345678901234567890", reply_markup=create_cancel())
    # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ IBAN
    bot.register_next_step_handler(message, process_iban_step)

def process_iban_step(message):
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    text = message.text
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—Å—Ç –≤ –∞—Ç—Ä–∏–±—É—Ç iban –æ–±—ä–µ–∫—Ç–∞ user_state
    user_state.iban = text
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –µ–≥–æ –∑–∞—è–≤–∫–∏ –∏ –∫–Ω–æ–ø–∫–æ–π "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
    bot.send_message(message.chat.id, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ –æ–¥–∏–Ω –∏–∑ —Ç—Ä–µ—Ö –±–∞–Ω–∫–æ–≤ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ: –¢–∏–Ω—å–∫–æ—Ñ—Ñ, –°–±–µ—Ä–±–∞–Ω–∫ –∏–ª–∏ –ê–ª—å—Ñ–∞–±–∞–Ω–∫.", reply_markup=create_bank_keyboard())    # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏
    bot.register_next_step_handler(message, process_bank_step)

def process_bank_step(message):
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    text = message.text
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–µ–∫—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–º—É –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    if text == "–°–±–µ—Ä–±–∞–Ω–∫" or text == "–¢–∏–Ω—å–∫–æ—Ñ—Ñ" or text == "–†–∞–π—Ñ—Ñ–∞–π–∑–µ–Ω":
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç —Ä–∞–≤–µ–Ω –æ–¥–Ω–æ–º—É –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ –≤ –∞—Ç—Ä–∏–±—É—Ç bank –æ–±—ä–µ–∫—Ç–∞ user_state
        user_state.bank = text
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –µ–≥–æ –∑–∞—è–≤–∫–∏ –∏ –∫–Ω–æ–ø–∫–æ–π "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
        bot.send_message(message.chat.id, f"–¢–≤–æ—è –∑–∞—è–≤–∫–∞ –Ω–∞ –æ–±–º–µ–Ω –≤–∞–ª—é—Ç—ã:\n\n–¢–∏–ø –ø–µ—Ä–µ–≤–æ–¥–∞: {user_state.type}\n–°—É–º–º–∞ –æ–±–º–µ–Ω–∞: {user_state.amount} –µ–≤—Ä–æ\n–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è: {user_state.name}\nIBAN: {user_state.iban}\n–ë–∞–Ω–∫: {user_state.bank}\n\n–ï—Å–ª–∏ –≤—Å–µ –≤–µ—Ä–Ω–æ, –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å.", reply_markup=create_confirm_keyboard())
        # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏
        bot.register_next_step_handler(message, process_confirm_step)
    else:
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–º—É –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø—Ä–æ—Å—å–±–æ–π –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω—É –∏–∑ –∫–Ω–æ–ø–æ–∫ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ
        bot.send_message(message.chat.id, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ –æ–¥–∏–Ω –∏–∑ —Ç—Ä–µ—Ö –±–∞–Ω–∫–æ–≤ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ: –¢–∏–Ω—å–∫–æ—Ñ—Ñ, –°–±–µ—Ä–±–∞–Ω–∫ –∏–ª–∏ –ê–ª—å—Ñ–∞–±–∞–Ω–∫.")
        # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å –æ –≤—ã–±–æ—Ä–µ –±–∞–Ω–∫–∞
        bot.register_next_step_handler(message, process_bank_step)

def process_confirm_step(message):
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 
    text = message.text
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–µ–∫—Å—Ç —Ä–∞–≤–µ–Ω "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
    if text == "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å":
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç —Ä–∞–≤–µ–Ω "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å", –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å—é –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–º, —á—Ç–æ –µ–≥–æ –∑–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –±–æ—Ç–∞
        bot.send_message(message.chat.id, "–°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–≤–æ—é –∑–∞—è–≤–∫—É! üôè\n–Ø –æ—Ç–ø—Ä–∞–≤–∏–ª –µ–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –±–æ—Ç–∞, –∏ –æ–Ω —Å–∫–æ—Ä–æ —Å–≤—è–∂–µ—Ç—Å—è —Å —Ç–æ–±–æ–π –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –æ–±–º–µ–Ω–∞. üìû", reply_markup=types.ReplyKeyboardRemove())
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –±–æ—Ç–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞—è–≤–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        bot.send_message(ADMIN_ID, f"–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –æ–±–º–µ–Ω –≤–∞–ª—é—Ç—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_state.name}:\n\n–¢–∏–ø –ø–µ—Ä–µ–≤–æ–¥–∞: {user_state.type}\n–°—É–º–º–∞ –æ–±–º–µ–Ω–∞: {user_state.amount} ‚Ç¨\nIBAN: {user_state.iban}\n–ë–∞–Ω–∫: {user_state.bank}\n–°–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É @{message.from_user.username} –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –æ–±–º–µ–Ω–∞.")
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ —Å—Ç–∞—Ä—Ç–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π —Å –∫–Ω–æ–ø–∫–∞–º–∏ –∫—É—Ä—Å, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏ –æ–±–º–µ–Ω
        bot.send_message(message.chat.id, "–Ø –º–æ–≥—É —Å–Ω–æ–≤–∞ –ø–æ–º–æ—á—å —Ç–µ–±–µ –∫—É–ø–∏—Ç—å –∏–ª–∏ –ø—Ä–æ–¥–∞—Ç—å –µ–≤—Ä–æ –ø–æ –≤—ã–≥–æ–¥–Ω–æ–º—É –∫—É—Ä—Å—É. üí∂", reply_markup=create_keyboard())
        save_user_id(message.chat.id)
    elif text == "–û—Ç–º–µ–Ω–∞":
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç —Ä–∞–≤–µ–Ω "–û—Ç–º–µ–Ω–∞", –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–º, —á—Ç–æ –µ–≥–æ –∑–∞—è–≤–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
        bot.send_message(message.chat.id, "–¢–≤–æ—è –∑–∞—è–≤–∫–∞ –Ω–∞ –æ–±–º–µ–Ω –≤–∞–ª—é—Ç—ã –æ—Ç–º–µ–Ω–µ–Ω–∞. üò¢\n–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ, –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –û–±–º–µ–Ω –Ω–∞ –≥–ª–∞–≤–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏ –º–Ω–µ /start, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, —á—Ç–æ —è —É–º–µ—é.", reply_markup=types.ReplyKeyboardRemove())
        bot.send_message(message.chat.id, "–¢—ã –º–æ–∂–µ—à—å –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞—è–≤–∫—É –ø–æ –Ω–æ–≤–æ–π. üí∂", reply_markup=create_keyboard())
    else:
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ —Ä–∞–≤–µ–Ω "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å", –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø—Ä–æ—Å—å–±–æ–π –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
        bot.send_message(message.chat.id, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, –µ—Å–ª–∏ —Ç—ã —É–≤–µ—Ä–µ–Ω –≤ —Å–≤–æ–µ–π –∑–∞—è–≤–∫–µ.")
        # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏
        bot.register_next_step_handler(message, process_confirm_step)

#------------------------------------------–û–¢–ó–´–í–´-------------------------------#
        
def save_reviews():
    with open(reviews_file, mode="w") as file:
        # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ —Ñ–∞–π–ª –≤–µ—Å—å —Å–ª–æ–≤–∞—Ä—å user_reviews –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
        json.dump(user_reviews, file)
        
def load_reviews():
    try:
        with open(reviews_file, mode="r") as file:
            return json.load(file)
    except FileNotFoundError:
        return {}  # –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –≤–µ—Ä–Ω—É—Ç—å –ø—É—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å
    except json.JSONDecodeError:
        return {}  # –ï—Å–ª–∏ JSON –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω, –≤–µ—Ä–Ω—É—Ç—å –ø—É—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å
    
@bot.message_handler(commands=["reviews"])
def reviews(message):
    # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∑–∞—è–≤–∫—É, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –µ–º—É —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –¥–≤—É–º—è –∫–Ω–æ–ø–∫–∞–º–∏ "–ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤" –∏ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∑—ã–≤—ã"
    bot.send_message(message.chat.id, "–¢—ã –º–æ–∂–µ—à—å –Ω–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤ –æ –º–æ–µ–π —Ä–∞–±–æ—Ç–µ –∏–ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∑—ã–≤—ã –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –í—ã–±–µ—Ä–∏ –æ–¥–Ω—É –∏–∑ –æ–ø—Ü–∏–π –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ.", reply_markup=create_review_keyboard())
    # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤—ã–±–æ—Ä –æ–ø—Ü–∏–∏
    bot.register_next_step_handler(message, process_review_step)

def process_review_step(message):
    text = message.text
    if text == "–ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤":
        if  check_user_id(message.chat.id) == False:
            bot.send_message(message.chat.id, "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ç—ã –Ω–µ –º–æ–∂–µ—à—å –Ω–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤, —Ç–∞–∫ –∫–∞–∫ —Ç—ã –µ—â—ë –Ω–µ –æ—Ñ–æ—Ä–º–∏–ª –Ω–∏ –æ–¥–Ω–æ–π –∑–∞—è–≤–∫–∏. üò≠", reply_markup=types.ReplyKeyboardRemove())
            start(message)
        elif check_user_id_review(message.chat.id) == True:
            bot.send_message(message.chat.id, "–í—ã —É–∂–µ –æ—Å—Ç–∞–≤–∏–ª–∏ –æ—Ç–∑—ã–≤. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ —Å–Ω–æ–≤–∞.", reply_markup=types.ReplyKeyboardRemove())
            start(message)
        else:
            bot.send_message(message.chat.id, "–ù–∞–ø–∏—à–∏ —Å–≤–æ–π –æ—Ç–∑—ã–≤ –æ –º–æ–µ–π —Ä–∞–±–æ—Ç–µ. –Ø –±—É–¥—É —Ä–∞–¥–∞ —É—Å–ª—ã—à–∞—Ç—å —Ç–≤–æ–µ –º–Ω–µ–Ω–∏–µ. üòä", reply_markup=create_cancel())
            bot.register_next_step_handler(message, process_write_step)
    elif text == "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∑—ã–≤—ã":
        view_reviews(message)
    elif text == "–û—Ç–º–µ–Ω–∞":
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç —Ä–∞–≤–µ–Ω "–û—Ç–º–µ–Ω–∞", –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–º, —á—Ç–æ –µ–≥–æ –∑–∞—è–≤–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
        bot.send_message(message.chat.id, "–û—Ç–º–µ–Ω–µ–Ω–æ", reply_markup=types.ReplyKeyboardRemove())
        bot.send_message(message.chat.id, "–ü–µ—Ä–µ—Ö–æ–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", reply_markup=create_keyboard())
    elif is_admin(message.from_user.id) and text == "–û—á–∏—Å—Ç–∫–∞":
        process_clear_step(message)
    else:
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–º—É –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø—Ä–æ—Å—å–±–æ–π –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω—É –∏–∑ –æ–ø—Ü–∏–π –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ
        bot.send_message(message.chat.id, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ –æ–¥–Ω—É –∏–∑ –æ–ø—Ü–∏–π –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ: –ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤ –∏–ª–∏ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∑—ã–≤—ã.")
        # –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤—ã–±–æ—Ä –æ–ø—Ü–∏–∏
        bot.register_next_step_handler(message, process_review_step)

def process_write_step(message):
    text = message.text
    user_id = message.chat.id
    if user_id not in user_reviews:
        user_reviews[user_id] = []
    user_reviews[user_id] = [f"‚úÖ @{message.from_user.username}: {text}\n"] #{user_state.name}
    save_reviews()
    bot.send_message(message.chat.id, "–°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–≤–æ–π –æ—Ç–∑—ã–≤! üôè\n–Ø –æ—á–µ–Ω—å —Ü–µ–Ω—é —Ç–≤–æ–µ –º–Ω–µ–Ω–∏–µ. üòä\n", reply_markup=create_keyboard())
    bot.send_message(ADMIN_ID, f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å @{message.from_user.username} –æ—Å—Ç–∞–≤–∏–ª —Å–≤–æ–π –æ—Ç–∑—ã–≤: {text}")
    save_user_id_review(message.chat.id)

def view_reviews(message):
    user_reviews = load_reviews()
    if user_reviews:
        reviews_text = ""
        for user_id, reviews in user_reviews.items():
            for review in reviews:
                reviews_text += f"{review}\n"
        bot.send_message(message.chat.id, f"–í–æ—Ç —á—Ç–æ –ø–∏—à—É—Ç –æ –º–æ–µ–π —Ä–∞–±–æ—Ç–µ –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:\n\n{reviews_text}", reply_markup=types.ReplyKeyboardRemove())
        bot.send_message(message.chat.id, f"‚ñº–ü–µ—Ä–µ—Ö–æ–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é‚ñº", reply_markup=create_keyboard())
    else:
        bot.send_message(message.chat.id, "–ü–æ–∫–∞ –µ—â–µ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –æ—Ç–∑—ã–≤–∞ –æ –º–æ–µ–π —Ä–∞–±–æ—Ç–µ. üò¢\n–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π –æ—Ç–∑—ã–≤, –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏ –º–Ω–µ /reviews.", reply_markup=create_keyboard())

def clear_all():
    # –û—á–∏—â–∞–µ–º —Å–ª–æ–≤–∞—Ä—å user_reviews —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ clear
    user_reviews.clear()
    # –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª reviews.json –Ω–∞ –∑–∞–ø–∏—Å—å —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ open –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ mode="w"
    with open(reviews_file, mode="w") as file:
        file.write("")
    with open(userID_file, mode="w") as file:
        file.write("")
    with open(userID_file_review, mode="w") as file:
        file.write("")

def process_clear_step(message): #–ê–î–ú–ò–ù–û–í–°–ö–ê–Ø –û–ß–ò–°–¢–ö–ê –°–ü–ò–°–ö–û–í
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    text = message.text
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–µ–∫—Å—Ç —Ä–∞–≤–µ–Ω "–û—á–∏—Å—Ç–∏—Ç—å"
    if text == "–û—á–∏—Å—Ç–∫–∞":
        clear_all()
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–º, —á—Ç–æ —Å–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ –æ—á–∏—â–µ–Ω
        bot.send_message(message.chat.id, "–°–ø–∏—Å–∫–∏ –æ—á–∏—â–µ–Ω—ã. üòä\n–í–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö –±—ã–ª–∏ –æ–±–Ω—É–ª–∏–Ω—ã –æ—Ç–∑—ã–≤—ã –∏ —Å–ø–∏—Å–∫–∏ –ª—é–¥–µ–π —Å –∏—Ö ID, –∫—Ç–æ –æ—Ñ–æ—Ä–º–ª—è–ª –∑–∞—è–≤–∫–∏!!!", reply_markup=types.ReplyKeyboardRemove())

#----------------------–°–û–•–†–ê–ù–ï–ù–ò–Ø-–ú–ï–¢–†–ò–ö–ò------------------------------#
def save_user_id(user_id):
    try:
        # –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø–∏—Å–∏
        with open(userID_file, 'w') as file:
            # –°–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å —Å user_id
            data = {'user_id': user_id}
            # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
            json.dump(data, file)
        print(f'User ID {user_id} —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ —Ñ–∞–π–ª {userID_file}')
    except Exception as e:
        print(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ User ID: {e}')

def save_user_id_review(user_id):
    try:
        # –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø–∏—Å–∏
        with open(userID_file_review, 'w') as file:
            # –°–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å —Å user_id
            data = {'user_id': user_id}
            # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
            json.dump(data, file)
        print(f'User ID {user_id} —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ —Ñ–∞–π–ª {userID_file_review}')
    except Exception as e:
        print(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ User ID: {e}')

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è user_id –≤ —Ñ–∞–π–ª–µ JSON
def check_user_id(user_id):
    try:
        # –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –¥–ª—è —á—Ç–µ–Ω–∏—è
        with open(userID_file, 'r') as file:
            # –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞
            data = json.load(file)
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ user_id –≤ –¥–∞–Ω–Ω—ã—Ö
            if 'user_id' in data and data['user_id'] == user_id:
                return True
            else:
                return False
    except FileNotFoundError:
        print(f'–§–∞–π–ª {userID_file} –Ω–µ –Ω–∞–π–¥–µ–Ω')
        return False
    except Exception as e:
        print(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ User ID: {e}')
        return False

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è user_id –≤ —Ñ–∞–π–ª–µ JSON
def check_user_id_review(user_id):
    try:
        # –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –¥–ª—è —á—Ç–µ–Ω–∏—è
        with open(userID_file_review, 'r') as file:
            # –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞
            data = json.load(file)
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ user_id –≤ –¥–∞–Ω–Ω—ã—Ö
            if 'user_id' in data and data['user_id'] == user_id:
                return True
            else:
                return False
    except FileNotFoundError:
        print(f'–§–∞–π–ª {userID_file_review} –Ω–µ –Ω–∞–π–¥–µ–Ω')
        return False
    except Exception as e:
        print(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ User ID: {e}')
        return False
#------------------------–ó–ê–ü–£–°–ö------------------#
bot.polling() 